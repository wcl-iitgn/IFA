"use strict";(self.webpackChunkdrought_atlas=self.webpackChunkdrought_atlas||[]).push([[647],{6647:(e,a,s)=>{s.r(a),s.d(a,{default:()=>S});var t=s(5043),l=s(9419),n=s(4867),i=(s(228),s(6433),s(20),s(9552),s(9762)),r=s(6422),o=s(6759),c=s(4684),d=s(2924),u=s(579);const p=e=>{let{year:a}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"legend",children:[(0,u.jsx)("div",{className:"item-heading",children:(0,u.jsxs)("p",{children:["Annual Max. Flooded Area (%) in year ",a]})}),(0,u.jsxs)("div",{className:"legend-color",children:[(0,u.jsx)("i",{style:{backgroundColor:"#F7FBFF"}}),(0,u.jsx)("i",{style:{backgroundColor:"#E4EFF9"}}),(0,u.jsx)("i",{style:{backgroundColor:"#D1E2F3"}}),(0,u.jsx)("i",{style:{backgroundColor:"#BAD6EB"}}),(0,u.jsx)("i",{style:{backgroundColor:"#73B2D8"}}),(0,u.jsx)("i",{style:{backgroundColor:"#539DCC"}}),(0,u.jsx)("i",{style:{backgroundColor:"#3585BF"}}),(0,u.jsx)("i",{style:{backgroundColor:"#1E6CB1"}}),(0,u.jsx)("i",{style:{backgroundColor:"#08519C"}}),(0,u.jsx)("i",{style:{backgroundColor:"#09306B"}})]}),(0,u.jsxs)("div",{className:"legend-item",children:[(0,u.jsx)("p",{className:"legend-num-value",children:" 0"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 0.1"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 0.25"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 0.5"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 1"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 2"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 5"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 10"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 15"}),(0,u.jsx)("p",{className:"legend-num-value",children:" 30"})]})]})})};var m=s(9455),x=s(1228),h=s(6262),j=s(8343),b=s(2019),f=s(423);const g=e=>{let{selectedView:a,handleShowTimeseries:s,selectedFeatureID:l,selectedState:n,selectedDistrict:i,selectedYear:r}=e;const[o,c]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(a&&l){(async()=>{try{c(!0);const e="".concat(a.replace(" ","_"),"_annual_flood_area.json"),s=await fetch("https://wcl-iitgn.github.io/india-flood-atlas-data/".concat(e)),t=(await s.json()).find((e=>e.ID===l));p(t),c(!1)}catch(e){console.error("Error fetching and filtering wind data:",e)}})()}}),[a,l]);const m=d&&Object.keys(d).filter((e=>"ID"!==e)).map((e=>parseInt(e))),x=[{name:"Flooded Area (km\xb2)",data:d&&Object.keys(d).filter((e=>"ID"!==e)).map((e=>d[e])).filter((e=>"number"===typeof e)).map((e=>e.toFixed(2)))}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"timeseries_heading",children:["District Wise"===a?(0,u.jsxs)("h4",{children:["Annual Flooded Area Timeseries of ",i,", ",n," in ",r]}):"State Wise"===a?(0,u.jsxs)("h4",{children:["Annual Flooded Area Timeseries of ",n,"  in ",r]}):null,(0,u.jsx)("button",{className:"chart_close_btn",onClick:s,children:(0,u.jsx)(f.WQq,{})})]}),x&&m&&!o?(0,u.jsx)(b.A,{options:{chart:{type:"line",stacked:!1,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"},dataLabels:{enabled:!1}},xaxis:{categories:m,title:{text:"Time",offsetX:10}},yaxis:{title:{text:"Flooded Area (km\xb2)",offsetY:10}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}]},series:x,type:"line",width:"100%",height:"100%"}):(0,u.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,u.jsx)("div",{className:"map_loader_container",children:(0,u.jsx)("span",{className:"map_loader"})})})]})},S=()=>{const[e,a]=(0,t.useState)(null),[s,b]=(0,t.useState)(""),[f,S]=(0,t.useState)(!1),[y,v]=(0,t.useState)([]),[D,N]=(0,t.useState)(null),[A,T]=(0,t.useState)(null),[_,C]=(0,t.useState)(null),[k,F]=(0,t.useState)(!1),I=(0,t.useRef)(null),[E,w]=(0,t.useState)(null),[B,O]=(0,t.useState)(null),[W,z]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(s){(async()=>{try{S(!0);const e="".concat(s.replace(" ","_"),"_annual_flood_frac.json"),a=await fetch("https://wcl-iitgn.github.io/india-flood-atlas-data/".concat(e)),t=await a.json();O(t),"District Wise"===s?z(d):"State Wise"===s&&z(m),S(!1)}catch(e){console.error("Error fetching and filtering wind data:",e)}})()}}),[s]);const Y=()=>{F(!k)};const R=e=>e>30?"#09306B":e>15?"#08519C":e>10?"#1E6CB1":e>5?"#3585BF":e>2?"#539DCC":e>1?"#73B2D8":e>.5?"#BAD6EB":e>.25?"#D1E2F3":e>.1?"#E4EFF9":"#F7FBFF";return(0,u.jsx)("div",{className:"dasboard_page_container",children:(0,u.jsxs)("div",{className:"main_dashboard",children:[(0,u.jsxs)("div",{className:"left_panel",children:[(0,u.jsx)("div",{className:"border border-secondary p-2 mb-2",children:(0,u.jsx)(i.A,{value:s,onChange:(e,s)=>{b(s),w(null),F(!1),T(null),C(null),N(null),a(null)},id:"session",options:["State Wise","District Wise"],renderInput:e=>(0,u.jsx)(r.A,{...e,className:"form-select mb-3",label:"Select Dataset"})})}),(0,u.jsx)("div",{className:"border border-secondary p-2 mb-2",children:(0,u.jsx)(i.A,{onChange:(e,s)=>((e,s)=>{a(s)})(0,s),id:"year",value:e,options:Array.from({length:120},((e,a)=>"".concat(1901+a))),noOptionsText:"No Available Data",renderOption:(e,a)=>(0,t.createElement)(x.A,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,u.jsx)(r.A,{...e,label:"Select Year",className:"form-select","aria-label":"Default select example"})})}),(0,u.jsxs)("div",{className:"border border-secondary p-2 mb-2",children:[(0,u.jsx)("label",{className:"form-label",children:"Filter Data:"}),(0,u.jsx)(i.A,{style:{marginBottom:"20px"},onChange:(e,a)=>((e,a)=>{let t=d.features.filter((e=>e.properties.STATE===a));t=[...new Set(t.map((e=>e)))],t.sort(),v(t),T(a);let l=W.features.filter((e=>e.properties.STATE===a));N({type:"FeatureCollection",features:l}),"State Wise"===s&&w(l[0].properties.ID)})(0,a),id:"state",value:A,getOptionLabel:e=>"".concat(e),options:[...new Set(m.features.map((e=>e.properties.STATE)))],isOptionEqualToValue:(e,a)=>e.Name===a.Name,noOptionsText:"No Available Data",disabled:!s,renderOption:(e,a)=>(0,t.createElement)(x.A,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,u.jsx)(r.A,{...e,label:"Search State"})}),"District Wise"===s&&(0,u.jsx)(i.A,{value:_,style:{marginBottom:"20px"},onChange:(e,a)=>((e,a)=>{C(a);let t=d.features.filter((e=>e.properties.DISTRICT===a&&e.properties.STATE===A));N({type:"FeatureCollection",features:t}),"District Wise"===s&&w(t[0].properties.ID)})(0,a),id:"district",getOptionLabel:e=>"".concat(e),options:[...new Set(y.map((e=>e.properties.DISTRICT)))],isOptionEqualToValue:(e,a)=>e.Name===a.Name,noOptionsText:"No Available Data",disabled:0===y.length,renderOption:(e,a)=>(0,t.createElement)(x.A,{component:"li",...e,key:a,sx:{fontSize:"14px"}},a),renderInput:e=>(0,u.jsx)(r.A,{...e,label:"Search District"})})]}),(0,u.jsx)("div",{className:"panel_button",children:(0,u.jsx)("button",{type:"button",disabled:!s||!e||!E,onClick:Y,children:k?"Hide Timeseries":"Show Timeseries"})})]}),(0,u.jsxs)("div",{className:"right_panel",ref:I,children:[(0,u.jsxs)(l.W,{fullscreenControl:!0,center:j.MV,style:{width:"100%",height:"100%",backgroundColor:"white",border:"none",margin:"auto"},zoom:(0,j.I6)(),maxBounds:j.Se,minZoom:(0,j.I6)(),keyboard:!1,dragging:(0,j.Q4)(),doubleClickZoom:!1,children:[(0,u.jsx)(c.A,{}),k&&E&&(0,u.jsx)("div",{className:"time_series_container",children:(0,u.jsx)(g,{selectedView:s,handleShowTimeseries:Y,selectedFeatureID:E,selectedDistrict:_,selectedState:A,selectedYear:e})}),s&&W&&e&&B&&(0,u.jsxs)(u.Fragment,{children:[D&&(0,u.jsx)(h.A,{selectedState:A,selectedDistrict:_,filteredIndiaDistrict:D}),(0,u.jsx)(n.k,{style:a=>{const s=(a=>{const s=B&&B.find((e=>e.ID===a));return s?s[e]:null})(a.properties.ID);return{fillColor:R(s),weight:1,opacity:1,color:"black",dashArray:"2",fillOpacity:1}},data:W.features,onEachFeature:function(a,t){t.on("mouseover",(function(){const l=B&&B.find((e=>e.ID===a.properties.ID));if(e&&a.properties&&a.properties.ID){let n;"District Wise"===s?n="\n          <div>\n            ID: ".concat(a.properties.ID,"<br/>\n            DISTRICT: ").concat(a.properties.DISTRICT,"<br/>\n            STATE: ").concat(a.properties.STATE,"<br/>\n            Annual Max. Flooded Area (%): ").concat(l?l[e]:null,"<br/>\n          </div>\n        "):"State Wise"===s&&(n="\n          <div>\n            ID: ".concat(a.properties.ID,"<br/>\n            STATE: ").concat(a.properties.STATE,"<br/>\n            Annual Max. Flooded Area (%): ").concat(l?l[e]:null,"<br/>\n          </div>\n        ")),t.bindTooltip(n,{sticky:!0})}t.openTooltip()})),t.on("mouseout",(function(){t.closeTooltip()}))}},s+W.features.length+e),(0,u.jsx)("div",{className:"legend-panel-desktop",children:(0,u.jsx)(p,{year:e})})]}),(0,u.jsx)(o.A,{})]}),f&&(0,u.jsx)("div",{className:"map_layer_loader_container_desktop",children:(0,u.jsx)("div",{className:"map_loader_container",children:(0,u.jsx)("span",{className:"map_loader"})})})]}),e&&(0,u.jsx)("div",{className:"legend-panel-mobile",children:(0,u.jsx)(p,{year:e})}),f&&(0,u.jsx)("div",{className:"map_layer_loader_container_mobile",children:(0,u.jsx)("div",{className:"map_loader_container",children:(0,u.jsx)("span",{className:"map_loader"})})})]})})}}}]);
//# sourceMappingURL=647.e0756c3c.chunk.js.map