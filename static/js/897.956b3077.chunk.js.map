{"version":3,"file":"static/js/897.956b3077.chunk.js","mappings":"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","sources":["components/AnnualFloodLegend.js","components/TimeSeriesCharts.js","pages/AnnualFloodPage.js"],"sourcesContent":["import React from 'react'\nconst AnnualFloodLegend = ({year}) => {\n    return (\n        <>\n\n                <div className=\"legend\">\n                    <div className=\"item-heading\">\n                        <p>Annual Max. Flooded Area (%) in year {year}</p>\n                    </div>\n                    {/* <div className=\"legend-item\">\n                        <p className=\"legend-color-value\"> Exceptional</p>\n                        <p className=\"legend-color-value\"> Extreme</p>\n                        <p className=\"legend-color-value\"> Severe</p>\n                        <p className=\"legend-color-value\"> Moderate</p>\n                        <p className=\"legend-color-value\"> Abnormal</p>\n                        <p className=\"legend-color-value\"> Normal</p>\n                    </div> */}\n                    <div className=\"legend-color\">\n                        <i style={{backgroundColor: '#F7FBFF'}}></i>\n                        <i style={{backgroundColor: '#E4EFF9'}}></i>\n                        <i style={{backgroundColor: '#D1E2F3'}}></i>\n                        <i style={{backgroundColor: '#BAD6EB'}}></i>\n                        <i style={{backgroundColor: '#73B2D8'}}></i>\n                        <i style={{backgroundColor: '#539DCC'}}></i>\n                        <i style={{backgroundColor: '#3585BF'}}></i>\n                        <i style={{backgroundColor: '#1E6CB1'}}></i>\n                        <i style={{backgroundColor: '#08519C'}}></i>\n                        <i style={{backgroundColor: '#09306B'}}></i>\n                    </div>\n\n                    <div className=\"legend-item\">\n                        <p className=\"legend-num-value\"> 0</p>\n                        <p className=\"legend-num-value\"> 0.1</p>\n                        <p className=\"legend-num-value\"> 0.25</p>\n                        <p className=\"legend-num-value\"> 0.5</p>\n                        <p className=\"legend-num-value\"> 1</p>\n                        <p className=\"legend-num-value\"> 2</p>\n                        <p className=\"legend-num-value\"> 5</p>\n                        <p className=\"legend-num-value\"> 10</p>\n                        <p className=\"legend-num-value\"> 15</p>\n                        <p className=\"legend-num-value\"> 30</p>\n                    </div>\n\n                </div>\n\n        </>\n\n    )\n}\n\nexport default AnnualFloodLegend","import React from 'react';\nimport Chart from 'react-apexcharts';\nimport { IoMdClose } from \"react-icons/io\";\nimport States_annual_flood_area from \"../assets/data/States_annual_flood_area.json\"\nimport Districts_annual_flood_area from \"../assets/data/Districts_annual_flood_area.json\"\n\nconst TimeSeriesCharts = ({ selectedView, handleShowTimeseries, selectedFeatureID, selectedState, selectedDistrict, selectedYear }) => {\n\n\n    let selectedChartData;\n    if (selectedView === 'District Wise') {\n        selectedChartData = Districts_annual_flood_area;\n    } else if (selectedView === 'State Wise') {\n        selectedChartData = States_annual_flood_area;\n    } else {\n        selectedChartData = null\n    }\n\n\n    const chartData = selectedChartData && selectedChartData.find(item => item.ID === selectedFeatureID);\n\n    const years = chartData && Object.keys(chartData).filter(key => key !== 'ID').map(year => parseInt(year));\n\n    const floodAreas = chartData && Object.keys(chartData)\n      .filter(key => key !== 'ID')\n      .map(key => chartData[key])\n      .filter(val => typeof val === 'number')\n      .map(val => val.toFixed(2));\n\n\n    // Prepare the series data for the chart\n    const seriesData = [{\n        name: 'Flooded Area (km²)',\n        data: floodAreas\n    }];\n\n\n\n\n\n    return (\n        <>\n            <div className='timeseries_heading'>\n\n                {selectedView === 'District Wise' ? (\n                    <h4>\n                        Annual Flooded Area Timeseries of {selectedDistrict}, {selectedState} in {selectedYear}\n\n                    </h4>\n                ) : selectedView === 'State Wise' ? (\n                    <h4>\n                        Annual Flooded Area Timeseries of {selectedState}  in {selectedYear}\n\n                    </h4>\n                ) : (\n                    null\n                )}\n\n                <button className='chart_close_btn' onClick={handleShowTimeseries}><IoMdClose /></button>\n            </div>\n\n\n            <Chart\n                options={{\n                    chart: {\n                        type: 'line',\n                        stacked: false,\n                        zoom: {\n                            type: 'x',\n                            enabled: true,\n                            autoScaleYaxis: true\n                        },\n                        toolbar: {\n                            autoSelected: 'zoom'\n                        },\n                        dataLabels: {\n                            enabled: false\n                        },\n\n\n                    },\n                    xaxis: {\n                        categories: years,\n                        title: {\n                            text: 'Time',\n                            offsetX: 10\n                        }\n                    },\n                    yaxis: {\n                        title: {\n                            text: 'Flooded Area (km²)',\n                            offsetY: 10\n                        }\n                    },\n                    responsive: [{\n                        breakpoint: 480,\n                        options: {\n                            legend: {\n                                position: 'bottom',\n                                offsetX: -10,\n                                offsetY: 0\n                            }\n                        }\n                    }]\n                }}\n                series={seriesData}\n                type=\"line\"\n                width=\"100%\"\n                height=\"100%\"\n            />\n\n        </>\n\n    );\n};\n\nexport default TimeSeriesCharts;\n","import React, { useEffect, useRef, useState } from 'react'\nimport { MapContainer, GeoJSON } from 'react-leaflet'\nimport * as L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\"\nimport 'leaflet-fullscreen/dist/Leaflet.fullscreen.js';\nimport 'leaflet-fullscreen/dist/leaflet.fullscreen.css';\nimport { Autocomplete, TextField } from \"@mui/material\";\nimport BaseMap from '../components/BaseMap';\nimport SearchBar from '../components/SearchBar';\nimport IndiaDistricts from '../assets/data/IndiaDistricts.json';\nimport AnnualFloodLegend from '../components/AnnualFloodLegend';\nimport IndiaStates from '../assets/data/IndiaStates.json';\nimport { Box } from \"@mui/system\";\nimport FiltererdJsonData from './FiltererdJsonData';\nimport { mapCenter, maxBounds, setDragging, setInitialMapZoom } from '../helpers/functions';\nimport Districts_annual_flood_frac from \"../assets/data/Districts_annual_flood_frac.json\"\nimport States_annual_flood_frac from \"../assets/data/States_annual_flood_frac.json\"\n\nimport TimeSeriesCharts from '../components/TimeSeriesCharts';\n\n\nconst AnnualFloodPage = () => {\n    const [selectedYear, setSelectedYear] = useState(null);\n    const [selectedView, setSelectedView] = useState(\"\")\n    const [loading, setLoading] = useState(false);\n    const [districtList, setDistrictList] = useState([]);\n    const [filteredIndiaDistrict, setFilteredIndiaDistrict] = useState(null);\n    const [selectedState, setSelectedState] = useState(null);\n    const [selectedDistrict, setSelectedDistrict] = useState(null);\n    const [showTimeseries, setShowTimeseries] = useState(false)\n    const mapContainerRef = useRef(null);\n    const [selectedFeatureID, setSelectedFeatureID] = useState(null);\n\n\n    let selectedMapData;\n    // let selectedChartData;\n    let selectedGeoJSonData;\n\n    if (selectedView === 'District Wise') {\n        selectedMapData = Districts_annual_flood_frac;\n        // selectedChartData = Districts_annual_flood_area;\n        selectedGeoJSonData = IndiaDistricts\n    } else if (selectedView === 'State Wise') {\n        selectedMapData = States_annual_flood_frac;\n        // selectedChartData = States_annual_flood_area;\n        selectedGeoJSonData = IndiaStates\n    } else {\n        selectedMapData = null\n        // selectedChartData = null\n        selectedGeoJSonData = null\n    }\n\n\n\n\n    const handleShowTimeseries = () => {\n        setShowTimeseries(!showTimeseries)\n    }\n\n    const handleViewSelection = (event, value) => {\n        setSelectedView(value);\n        setSelectedFeatureID(null)\n        setShowTimeseries(false)\n        setSelectedState(null)\n        setSelectedDistrict(null)\n        setFilteredIndiaDistrict(null)\n        setSelectedYear(null)\n\n    };\n\n    const handleStateSelect = (event, value) => {\n        let items = IndiaDistricts.features.filter((item) => item.properties.STATE === value);\n        items = [...new Set(items.map((item) => item))];\n        items.sort();\n\n        setDistrictList(items);\n        setSelectedState(value)\n\n        let filteredStateFeatures = selectedGeoJSonData.features.filter((feature) => feature.properties.STATE === value);\n\n\n        setFilteredIndiaDistrict({\n            type: \"FeatureCollection\",\n            features: filteredStateFeatures,\n        });\n\n        if (selectedView === 'State Wise') {\n            setSelectedFeatureID(filteredStateFeatures[0].properties.ID)\n        }\n\n\n    };\n\n\n\n\n    const handleDistrictSelect = (event, value) => {\n        setSelectedDistrict(value)\n\n        let filteredDistrictFeatures = IndiaDistricts.features.filter((feature) => feature.properties.DISTRICT === value && feature.properties.STATE === selectedState);\n\n        setFilteredIndiaDistrict({\n            type: \"FeatureCollection\",\n            features: filteredDistrictFeatures,\n        });\n        if (selectedView === 'District Wise') {\n            setSelectedFeatureID(filteredDistrictFeatures[0].properties.ID)\n        }\n\n\n\n\n\n    };\n\n\n\n    const handleYearChange = (event, value) => {\n        setSelectedYear(value);\n    };\n\n\n\n\n\n\n\n    function DistrictOnEachfeature(feature, layer) {\n        layer.on('mouseover', function () {\n            const DataItem = selectedMapData.find(item => item.ID === feature.properties.ID);\n            if (selectedYear && feature.properties && feature.properties.ID) {\n                let popupContent;\n                if (selectedView === 'District Wise') {\n                    popupContent = `\n          <div>\n            ID: ${feature.properties.ID}<br/>\n            DISTRICT: ${feature.properties.DISTRICT}<br/>\n            STATE: ${feature.properties.STATE}<br/>\n            Annual Max. Flooded Area (%): ${DataItem ? DataItem[selectedYear] : null}<br/>\n          </div>\n        `;\n                } else if (selectedView === 'State Wise') {\n                    popupContent = `\n          <div>\n            ID: ${feature.properties.ID}<br/>\n            STATE: ${feature.properties.STATE}<br/>\n            Annual Max. Flooded Area (%): ${DataItem ? DataItem[selectedYear] : null}<br/>\n          </div>\n        `;\n                }\n                layer.bindTooltip(popupContent, { sticky: true });\n            }\n            layer.openTooltip();\n        });\n\n        layer.on('mouseout', function () {\n            layer.closeTooltip();\n        });\n    }\n\n\n\n    const DistrictDensity = (density => {\n        return density > 30 ? '#09306B'\n            : density > 15 ? '#08519C'\n                : density > 10 ? '#1E6CB1'\n                    : density > 5 ? '#3585BF'\n                        : density > 2 ? '#539DCC'\n                            : density > 1 ? '#73B2D8'\n                                : density > 0.5 ? '#BAD6EB'\n                                    : density > 0.25 ? '#D1E2F3'\n                                        : density > 0.1 ? '#E4EFF9'\n                                            : '#F7FBFF';\n    })\n\n\n\n\n    const DistrictStyle = (feature => {\n\n        const getDensityFromSummerData = (id) => {\n            const DataItem = selectedMapData.find(item => item.ID === id);\n            return DataItem ? DataItem[selectedYear] : null;\n\n        };\n\n        const density = getDensityFromSummerData(feature.properties.ID);\n        return ({\n            fillColor: DistrictDensity(density),\n            weight: 1,\n            opacity: 1,\n            color: 'black',\n            dashArray: '2',\n            fillOpacity: 1\n        });\n\n\n\n    });\n\n\n\n\n    return (\n        <div className='dasboard_page_container'>\n\n            <div className='main_dashboard'>\n                <div className='left_panel'>\n\n                    <div className='border border-secondary p-2 mb-2'>\n                        <Autocomplete\n                            value={selectedView}\n                            onChange={handleViewSelection}\n                            id=\"session\"\n                            options={[\n                                \"State Wise\",\n                                \"District Wise\",\n                            ]}\n                            renderInput={(params) => (\n                                <TextField {...params} className=\"form-select mb-3\" label=\"Select Dataset\" />\n                            )}\n                        />\n\n\n                    </div>\n\n                    <div className='border border-secondary p-2 mb-2'>\n                        <Autocomplete\n                            onChange={(event, value) => handleYearChange(event, value)}\n                            id=\"year\"\n                            value={selectedYear}\n                            options={Array.from({ length: 2020 - 1900 }, (_, index) => `${1901 + index}`)}\n                            noOptionsText=\"No Available Data\"\n                            renderOption={(props, year) => (\n                                <Box component=\"li\" {...props} key={year}\n                                    sx={{\n                                        fontSize: \"14px\",\n                                    }}>\n                                    {year}\n                                </Box>\n                            )}\n                            renderInput={(params) => (\n                                <TextField\n                                    {...params}\n                                    label=\"Select Year\"\n                                    className=\"form-select\"\n                                    aria-label=\"Default select example\"\n                                />\n                            )}\n                        />\n\n                    </div>\n\n\n\n                    <div className='border border-secondary p-2 mb-2'>\n                        <label className=\"form-label\">Filter Data:</label>\n\n                        <Autocomplete\n                            style={{ marginBottom: \"20px\" }}\n                            onChange={(event, value) => handleStateSelect(event, value)}\n                            id=\"state\"\n                            value={selectedState}\n                            getOptionLabel={(state) => `${state}`}\n                            options={[...new Set(IndiaStates.features.map((item) => item.properties.STATE))]}\n                            isOptionEqualToValue={(option, value) => option.Name === value.Name}\n                            noOptionsText={\"No Available Data\"}\n                            disabled={!selectedView}\n                            renderOption={(props, state) => (\n                                <Box component=\"li\" {...props} key={state}\n                                    sx={{\n                                        fontSize: \"14px\",\n                                    }}>\n                                    {state}\n                                </Box>\n                            )}\n                            renderInput={(params) => <TextField {...params} label=\"Search State\" />}\n                        />\n\n                        {selectedView === \"District Wise\" && (\n                            <Autocomplete\n                                value={selectedDistrict}\n                                style={{ marginBottom: \"20px\" }}\n                                onChange={(event, value) => handleDistrictSelect(event, value)}\n                                id=\"district\"\n                                getOptionLabel={(district) => `${district}`}\n                                options={[...new Set(districtList.map((item) => item.properties.DISTRICT))]}\n                                isOptionEqualToValue={(option, value) => option.Name === value.Name}\n                                noOptionsText={\"No Available Data\"}\n                                disabled={districtList.length === 0}\n                                renderOption={(props, district) => (\n                                    <Box component=\"li\" {...props} key={district}\n                                        sx={{\n                                            fontSize: \"14px\",\n                                        }}>\n                                        {district}\n                                    </Box>\n                                )}\n                                renderInput={(params) => <TextField {...params}\n\n                                    label=\"Search District\" />}\n                            />\n                        )}\n\n\n                    </div>\n\n                    <div className='panel_button'>\n                        <button type='button' disabled={!selectedView || !selectedYear || !selectedFeatureID} onClick={handleShowTimeseries}>\n                            {showTimeseries ? \"Hide Timeseries\" : \"Show Timeseries\"}\n                        </button>\n                    </div>\n\n\n\n\n                </div>\n\n\n\n                <div className='right_panel' ref={mapContainerRef}>\n\n                    <MapContainer\n                        fullscreenControl={true}\n\n                        center={mapCenter}\n                        style={{ width: '100%', height: \"100%\", backgroundColor: 'white', border: 'none', margin: 'auto' }}\n                        zoom={setInitialMapZoom()}\n                        maxBounds={maxBounds}\n                        // maxZoom={8}\n                        minZoom={setInitialMapZoom()}\n                        keyboard={false}\n                        dragging={setDragging()}\n                        // attributionControl={false}\n                        // scrollWheelZoom={false}\n                        doubleClickZoom={false}\n                    >\n                        <SearchBar />\n                        {/* <ExportMapButton mapContainerRef={mapContainerRef} selectedYear={selectedYear} selectedSession={selectedView} /> */}\n\n\n                        {showTimeseries && selectedFeatureID && (\n                            <div className='time_series_container'>\n                                <TimeSeriesCharts\n                                    selectedView={selectedView}\n                                    handleShowTimeseries={handleShowTimeseries}\n                                    // selectedChartData={selectedChartData} \n                                    selectedFeatureID={selectedFeatureID}\n                                    selectedDistrict={selectedDistrict}\n                                    selectedState={selectedState}\n                                    selectedYear={selectedYear}\n                                />\n                            </div>\n                        )}\n\n\n                        {selectedView && selectedYear && selectedMapData && (\n                            <>\n\n                                {filteredIndiaDistrict && (\n                                    <FiltererdJsonData\n                                        selectedState={selectedState}\n                                        selectedDistrict={selectedDistrict}\n                                        // DistrictStyle={DistrictStyle}\n                                        filteredIndiaDistrict={filteredIndiaDistrict}\n                                    // DistrictOnEachfeature={DistrictOnEachfeature}\n                                    />\n\n\n                                )}\n\n                                <GeoJSON\n                                    key={`${selectedView}+${selectedYear}`}\n                                    style={DistrictStyle}\n                                    data={selectedGeoJSonData.features}\n                                    onEachFeature={DistrictOnEachfeature}\n                                />\n\n\n                                <div className=\"legend-panel-desktop\">\n                                    <AnnualFloodLegend year={selectedYear} />\n                                </div>\n                            </>\n\n\n                        )}\n\n\n                        <BaseMap />\n\n                    </MapContainer>\n\n\n\n                    {selectedYear && (\n                        <div className=\"legend-panel-mobile\">\n                            <AnnualFloodLegend year={selectedYear} />\n                        </div>\n                    )}\n\n\n\n                    {loading && (\n                        <div className='map_layer_loader_container_desktop'>\n                            <div className=\"map_loader_container\">\n                                <span className=\"map_loader\"></span>\n                            </div>\n\n                        </div>\n\n                    )}\n\n                </div>\n\n\n                {loading && (\n                    <div className='map_layer_loader_container_mobile'>\n                        <div className=\"map_loader_container\">\n                            <span className=\"map_loader\"></span>\n                        </div>\n\n                    </div>\n\n                )}\n\n\n            </div>\n\n        </div>\n    )\n}\n\nexport default AnnualFloodPage"],"names":["_ref","year","_jsx","_Fragment","children","_jsxs","className","style","backgroundColor","selectedChartData","selectedView","handleShowTimeseries","selectedFeatureID","selectedState","selectedDistrict","selectedYear","Districts_annual_flood_area","States_annual_flood_area","chartData","find","item","ID","years","Object","keys","filter","key","map","parseInt","seriesData","name","data","val","toFixed","onClick","IoMdClose","Chart","options","chart","type","stacked","zoom","enabled","autoScaleYaxis","toolbar","autoSelected","dataLabels","xaxis","categories","title","text","offsetX","yaxis","offsetY","responsive","breakpoint","legend","position","series","width","height","AnnualFloodPage","setSelectedYear","useState","setSelectedView","loading","setLoading","districtList","setDistrictList","filteredIndiaDistrict","setFilteredIndiaDistrict","setSelectedState","setSelectedDistrict","showTimeseries","setShowTimeseries","mapContainerRef","useRef","setSelectedFeatureID","selectedMapData","selectedGeoJSonData","Districts_annual_flood_frac","IndiaDistricts","States_annual_flood_frac","IndiaStates","DistrictDensity","density","Autocomplete","value","onChange","handleViewSelection","event","id","renderInput","params","TextField","label","handleYearChange","Array","from","length","_","index","concat","noOptionsText","renderOption","props","_createElement","Box","component","sx","fontSize","marginBottom","handleStateSelect","items","features","properties","STATE","Set","sort","filteredStateFeatures","feature","getOptionLabel","state","isOptionEqualToValue","option","Name","disabled","handleDistrictSelect","filteredDistrictFeatures","DISTRICT","district","ref","MapContainer","fullscreenControl","center","mapCenter","border","margin","setInitialMapZoom","maxBounds","minZoom","keyboard","dragging","setDragging","doubleClickZoom","SearchBar","TimeSeriesCharts","FiltererdJsonData","GeoJSON","DataItem","getDensityFromSummerData","fillColor","weight","opacity","color","dashArray","fillOpacity","onEachFeature","layer","on","popupContent","bindTooltip","sticky","openTooltip","closeTooltip","AnnualFloodLegend","BaseMap"],"sourceRoot":""}